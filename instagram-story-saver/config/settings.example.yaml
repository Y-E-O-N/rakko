# Instagram Story Saver Configuration
# ì´ íŒŒì¼ì„ settings.yamlë¡œ ë³µì‚¬í•˜ê³  ì‹¤ì œ ê°’ì„ ì…ë ¥í•˜ì„¸ìš”
#
# ğŸ” ë³´ì•ˆ ê¶Œì¥ì‚¬í•­:
# - ì§ì ‘ ë¹„ë°€ë²ˆí˜¸ë¥¼ ì…ë ¥í•˜ì§€ ë§ê³  í™˜ê²½ ë³€ìˆ˜ë¥¼ ì‚¬ìš©í•˜ì„¸ìš”
# - ${ENV_VAR} í˜•ì‹ìœ¼ë¡œ í™˜ê²½ ë³€ìˆ˜ ì°¸ì¡° ê°€ëŠ¥
# - ìì„¸í•œ ë‚´ìš©: docs/SECURITY.md

# Instagram ê³„ì • ì„¤ì •
instagram:
  # í™˜ê²½ ë³€ìˆ˜ ì‚¬ìš© ê¶Œì¥: ${IG_USERNAME}
  username: "${IG_USERNAME}"
  password: "${IG_PASSWORD}"
  # 2FA ì‚¬ìš© ì‹œ TOTP ì‹œí¬ë¦¿ (ì„ íƒì‚¬í•­)
  totp_secret: ""
  # ì„¸ì…˜ íŒŒì¼ ê²½ë¡œ
  session_file: "data/sessions/session.json"
  
  # API ìš”ì²­ ì„¤ì •
  api_delay_min: 1.0      # API ìš”ì²­ ê°„ ìµœì†Œ ë”œë ˆì´ (ì´ˆ)
  api_delay_max: 3.0      # API ìš”ì²­ ê°„ ìµœëŒ€ ë”œë ˆì´ (ì´ˆ)
  api_cooldown_seconds: 300  # API ì œí•œ ì‹œ ì¿¨ë‹¤ìš´ (ì´ˆ, ê¸°ë³¸ 5ë¶„)
  api_max_failures: 3     # ì—°ì† ë¡œê·¸ì¸ ì‹¤íŒ¨ í—ˆìš© íšŸìˆ˜
  
  # ìœ ì € ID ì¡°íšŒ ì„¤ì •
  user_id_resolve_delay: 2.0  # ìœ ì € ID ì¡°íšŒ ê°„ ë”œë ˆì´ (ì´ˆ)
  user_id_resolve_batch: 10   # ìœ ì € ID ì¡°íšŒ ë°°ì¹˜ í¬ê¸°

# ëª¨ë‹ˆí„°ë§ ì„¤ì •
monitor:
  # ìŠ¤í† ë¦¬ ì²´í¬ ì£¼ê¸° (ì´ˆ) - ëœë¤ ë²”ìœ„ë¡œ ì„¤ì •í•˜ì—¬ ì°¨ë‹¨ ë°©ì§€
  # ê¸°ë³¸ê°’: 5~6ì‹œê°„ (18000~21600ì´ˆ)
  check_interval_min: 18000  # ìµœì†Œ 5ì‹œê°„
  check_interval_max: 21600  # ìµœëŒ€ 6ì‹œê°„
  # í•œ ë²ˆì— ì²´í¬í•  ìœ ì € ìˆ˜ (API ì œí•œ íšŒí”¼)
  batch_size: 20
  # ë°°ì¹˜ ê°„ ëŒ€ê¸° ì‹œê°„ (ì´ˆ)
  batch_delay: 5
  # íƒ€ê²Ÿ ìœ ì € ëª©ë¡ íŒŒì¼
  targets_file: "config/targets.json"
  # ë‹¤ìš´ë¡œë“œ ê¸°ë¡ íŒŒì¼ (ì¤‘ë³µ ë°©ì§€)
  history_file: "data/download_history.json"
  # ìŠ¤í† ë¦¬ ë§Œë£Œ ì‹œê°„ (ì‹œê°„, ê¸°ë³¸ 24ì‹œê°„)
  story_expire_hours: 24

# ë‹¤ìš´ë¡œë“œ ì„¤ì •
downloader:
  # ì €ì¥ ë””ë ‰í† ë¦¬
  output_dir: "data/stories"
  # íŒŒì¼ëª… í˜•ì‹
  # {username}: ìœ ì €ë„¤ì„
  # {story_id}: ìŠ¤í† ë¦¬ ID
  # %Y%m%d_%H%M%S: ë‚ ì§œ/ì‹œê°„
  filename_format: "{username}_%Y%m%d_%H%M%S_{story_id}"
  # ìµœëŒ€ ë™ì‹œ ë‹¤ìš´ë¡œë“œ ìˆ˜
  max_concurrent: 3
  # ë¹„ë””ì˜¤ ìŠ¤í† ë¦¬ë„ ë‹¤ìš´ë¡œë“œ (true/false)
  download_videos: true
  # ì´ë¯¸ì§€ ìŠ¤í† ë¦¬ë„ ë‹¤ìš´ë¡œë“œ (true/false)
  download_images: true
  # ì¸ë„¤ì¼ë„ ì €ì¥ (ë¹„ë””ì˜¤ì˜ ê²½ìš°)
  save_thumbnails: false
  # ìµœì†Œ ë””ìŠ¤í¬ ì—¬ìœ  ê³µê°„ (MB)
  min_disk_space_mb: 500
  # ë¹„ë””ì˜¤ í™”ì§ˆ: highest(ê¸°ë³¸), lowest, 1080p, 720p, 480p, 360p
  video_quality: "highest"
  # ì´ë¯¸ì§€ í™”ì§ˆ: highest(ê¸°ë³¸), lowest
  image_quality: "highest"
  
  # ë„¤íŠ¸ì›Œí¬ ì„¤ì •
  timeout_connect: 10     # ì—°ê²° íƒ€ì„ì•„ì›ƒ (ì´ˆ)
  timeout_read: 60        # ì½ê¸° íƒ€ì„ì•„ì›ƒ (ì´ˆ)
  chunk_size: 8192        # ë‹¤ìš´ë¡œë“œ ì²­í¬ í¬ê¸° (ë°”ì´íŠ¸)
  max_retries: 3          # ë‹¤ìš´ë¡œë“œ ì¬ì‹œë„ íšŸìˆ˜
  
  # ë””ìŠ¤í¬ ë° ëŒ€ê¸°ì—´ ì„¤ì •
  disk_check_interval_mb: 10  # ë‹¤ìš´ë¡œë“œ ì¤‘ ë””ìŠ¤í¬ ì²´í¬ ê°„ê²© (MB)
  queue_check_interval: 1.0   # ëŒ€ê¸°ì—´ ì²´í¬ ê°„ê²© (ì´ˆ)
  max_completed_history: 1000 # ì™„ë£Œ ê¸°ë¡ ìµœëŒ€ ë³´ê´€ ìˆ˜

  # User-Agent ì»¤ìŠ¤í„°ë§ˆì´ì§• (ë¹ˆ ê°’ì´ë©´ ê¸°ë³¸ê°’ ì‚¬ìš©)
  user_agent: ""

# í´ë¼ìš°ë“œ ì €ì¥ì†Œ ì„¤ì • (Cloudflare R2)
cloud_storage:
  enabled: true
  provider: "r2"
  r2:
    account_id: "${R2_ACCOUNT_ID}"
    access_key_id: "${R2_ACCESS_KEY_ID}"
    secret_access_key: "${R2_SECRET_ACCESS_KEY}"
    bucket_name: "instagram-stories"
    # í¼ë¸”ë¦­ URL (ì„ íƒì‚¬í•­)
    public_url: ""
  # ì—…ë¡œë“œ í›„ ë¡œì»¬ íŒŒì¼ ì‚­ì œ (ì„œë²„ ìš´ì˜ ì‹œ ê¶Œì¥)
  delete_after_upload: true
  
  # ì—…ë¡œë“œ ì„¤ì •
  multipart_threshold_mb: 50  # ë©€í‹°íŒŒíŠ¸ ì—…ë¡œë“œ ì„ê³„ê°’ (MB)
  multipart_chunksize_mb: 25  # ë©€í‹°íŒŒíŠ¸ ì²­í¬ í¬ê¸° (MB)
  max_concurrency: 5          # ì—…ë¡œë“œ ë™ì‹œì„±
  connect_timeout: 30         # ì—°ê²° íƒ€ì„ì•„ì›ƒ (ì´ˆ)
  read_timeout: 60            # ì½ê¸° íƒ€ì„ì•„ì›ƒ (ì´ˆ)
  max_retries: 5              # ì—…ë¡œë“œ ì¬ì‹œë„ íšŸìˆ˜

# ì•Œë¦¼ ì„¤ì •
notifications:
  enabled: true
  # ì•Œë¦¼ ì œê³µì: "discord" ë˜ëŠ” "telegram"
  provider: "discord"

  # Discord ì„¤ì • (ê¶Œì¥)
  discord:
    webhook_url: "${DISCORD_WEBHOOK_URL}"
    queue_size: 100       # ë©”ì‹œì§€ í í¬ê¸°
    max_retries: 3        # ë©”ì‹œì§€ ì¬ì‹œë„ íšŸìˆ˜
    message_delay: 0.5    # ë©”ì‹œì§€ ê°„ ë”œë ˆì´ (ì´ˆ)
    request_timeout: 10   # ìš”ì²­ íƒ€ì„ì•„ì›ƒ (ì´ˆ)

  # Telegram ì„¤ì • (ëŒ€ì•ˆ)
  telegram:
    bot_token: "${TELEGRAM_BOT_TOKEN}"
    chat_id: "${TELEGRAM_CHAT_ID}"
    queue_size: 100
    max_retries: 3
    message_delay: 0.5

  # ì¼ì¼ ìš”ì•½ ì‹œê°„ (24ì‹œê°„ í˜•ì‹)
  daily_summary_hour: 23
  daily_summary_minute: 0

  # ì•Œë¦¼ ì¢…ë¥˜
  notify_on:
    # ìƒˆ ìŠ¤í† ë¦¬ ê°ì§€ ì‹œ
    story_detected: true
    # ë‹¤ìš´ë¡œë“œ ì™„ë£Œ ì‹œ
    download_complete: true
    # ë‹¤ìš´ë¡œë“œ ì‹¤íŒ¨ ì‹œ
    download_failed: true
    # ì¼ì¼ ìš”ì•½
    daily_summary: true
    # ì˜¤ë¥˜ ë°œìƒ ì‹œ
    errors: true

# ë°ì´í„°ë² ì´ìŠ¤ ì„¤ì •
database:
  # SQLite ë°ì´í„°ë² ì´ìŠ¤ ê²½ë¡œ
  path: "data/story_saver.db"

# ë¡œê¹… ì„¤ì •
logging:
  level: "INFO"  # DEBUG, INFO, WARNING, ERROR
  file: "data/logs/story_saver.log"
  max_size_mb: 10
  backup_count: 5

# ê³ ê¸‰ ì„¤ì •
advanced:
  # í”„ë¡ì‹œ ì„¤ì • (ì„ íƒì‚¬í•­)
  proxy: ""
  # User-Agent ì»¤ìŠ¤í„°ë§ˆì´ì§• (ë¹ˆ ê°’ì´ë©´ ê¸°ë³¸ê°’ ì‚¬ìš©)
  user_agent: ""
  # ì¬ì‹œë„ ì„¤ì •
  max_retries: 3
  retry_delay: 30
  # ìŠ¤í† ë¦¬ ë§Œë£Œ ì „ ì¬ë‹¤ìš´ë¡œë“œ ë°©ì§€ ì‹œê°„ (ì‹œê°„)
  # ê°™ì€ ìŠ¤í† ë¦¬ë¥¼ ì´ ì‹œê°„ ë‚´ì— ë‹¤ì‹œ ë‹¤ìš´ë¡œë“œí•˜ì§€ ì•ŠìŒ
  duplicate_check_hours: 24
